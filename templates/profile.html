{% extends "base.html" %}

{% block content %}
<h2 class="mb-4">Your Activity</h2>
<p>This is your anonymous activity table. Each square shows how many tracks you submitted on that day (last 7 weeks).</p>
<div class="d-flex flex-column align-items-center">
    <table class="table table-bordered activity-table" style="width: auto;">
        <tbody>
        {% for row in grid_rows %}
            <tr>
            {% for count in row %}
                {% if count == 0 %}
                <td style="width:22px; height:22px; text-align:center; background-color: #e0e0e0; color: #222; font-weight: bold;">&nbsp;</td>
                {% elif count < 2 %}
                <td style="width:22px; height:22px; text-align:center; background-color: #b2dfdb; color: #222; font-weight: bold;">{{ count }}</td>
                {% elif count < 4 %}
                <td style="width:22px; height:22px; text-align:center; background-color: #4dd0e1; color: #222; font-weight: bold;">{{ count }}</td>
                {% else %}
                <td style="width:22px; height:22px; text-align:center; background-color: #00796b; color: #fff; font-weight: bold;">{{ count }}</td>
                {% endif %}
            {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <div class="mt-3">
        <small>Dark = more submissions. Only you can see this.</small>
    </div>
</div>

<h3 class="mt-5">Your Submissions</h3>
<ul class="list-group">
    {% for sub in submissions %}
    <li class="list-group-item">
        <strong>{{ sub.track_title }}</strong> by {{ sub.artist_name }} ({{ sub.genre }})<br>
        <small>{{ sub.timestamp.strftime('%Y-%m-%d') }}</small>
    </li>
    {% else %}
    <li class="list-group-item">No submissions yet.</li>
    {% endfor %}
</ul>

<h3 class="mt-5">Your Genre Interests</h3>
<ul class="list-group mb-3">
    {% if current_user.genres_interested %}
        {% for genre in current_user.genres_interested.split(',') %}
        <li class="list-group-item">{{ genre }}</li>
        {% endfor %}
    {% else %}
        <li class="list-group-item">No genres selected yet.</li>
    {% endif %}
</ul>
<a href="{{ url_for('edit_profile') }}" class="btn btn-outline-primary">Edit Genre Interests</a>
{% endblock %}
